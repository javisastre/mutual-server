(this["webpackJsonpm3-client"]=this["webpackJsonpm3-client"]||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){},109:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(44),c=n.n(s),i=n(7),o=(n(50),n(9)),l=n(22),u=n(2),h=n(3),d=n(6),j=n(5),p=n(17),b=n.n(p),m=new(function(){function e(){Object(u.a)(this,e),this.auth=b.a.create({baseURL:"".concat("https://mutual.herokuapp.com"),withCredentials:!0})}return Object(h.a)(e,[{key:"signup",value:function(e,t,n){return this.auth.post("/auth/signup",{username:e,email:t,password:n}).then((function(e){return e.data}))}},{key:"login",value:function(e,t){return this.auth.post("/auth/login",{username:e,password:t}).then((function(e){return e.data}))}},{key:"logout",value:function(){return this.auth.get("/auth/logout").then((function(e){return e.data}))}},{key:"me",value:function(){return this.auth.get("/auth/me").then((function(e){return e.data}))}}]),e}()),f=n(0),O=r.a.createContext(),v=O.Consumer,x=O.Provider,g=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).me=function(){m.me().then((function(e){return a.setState({isLoggedIn:!0,user:e,isLoading:!1})})).catch((function(e){return a.setState({isLoggedIn:!1,user:null,isLoading:!1})}))},a.signup=function(e,t,n){m.signup(e,t,n).then((function(e){return a.setState({isLoggedIn:!0,user:e})})).catch((function(e){a.setState({isLoggedIn:!1,user:null})}))},a.login=function(e,t){m.login(e,t).then((function(e){return a.setState({isLoggedIn:!0,user:e})})).catch((function(e){a.setState({isLoggedIn:!1,user:null})}))},a.logout=function(){m.logout().then((function(){return a.setState({isLoggedIn:!1,user:null})})).catch((function(e){return console.log(e)}))},a.state={isLoggedIn:!1,isLoading:!0,user:null},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.me()}},{key:"render",value:function(){var e=this.state,t=e.isLoggedIn,n=e.isLoading,a=e.user,r=this.signup,s=this.login,c=this.logout,i=this.me;return n?Object(f.jsx)("p",{children:"Loading"}):Object(f.jsx)(x,{value:{isLoggedIn:t,isLoading:n,user:a,signup:r,login:s,logout:c,me:i},children:this.props.children})}}]),n}(r.a.Component),y=function(e){return function(t){return Object(f.jsx)(v,{children:function(n){var a=n.isLoggedIn,r=n.isLoading,s=n.user,c=n.signup,i=n.login,o=n.logout,u=n.me;return Object(f.jsx)(e,Object(l.a)({isLoggedIn:a,isLoading:r,user:s,signup:c,login:i,logout:o,me:u},t))}})}},k=n(4),C=n.n(k),w=n(8),N=(n(71),new(function(){function e(){Object(u.a)(this,e),this.alert=b.a.create({baseURL:"".concat("https://mutual.herokuapp.com","/api/alerts"),withCredentials:!0})}return Object(h.a)(e,[{key:"create",value:function(e){return this.alert.post("/create",{locationArray:e}).then((function(e){return e.data}))}},{key:"active",value:function(e){return this.alert.get("/active/".concat(e)).then((function(e){return e.data}))}},{key:"delete",value:function(e){return this.alert.post("/delete",{value:e}).then((function(e){return e.data}))}},{key:"iamfine",value:function(e){return this.alert.post("/iamfine",{value:e}).then((function(e){return e.data}))}},{key:"archive",value:function(e){return this.alert.post("/archive",e).then((function(e){return e.data}))}},{key:"heatmap",value:function(){return this.alert.get("/heatmap").then((function(e){return e.data}))}}]),e}()));var S=Object(o.g)(y((function(e){var t=function(){var t=Object(w.a)(C.a.mark((function t(){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[2.1901371017810924,41.397680267661016],t.next=3,N.create(n);case 3:return t.next=5,e.me();case 5:e.activateAlert(),console.log("activated alert from AlertButton");case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"alert-container",onClick:t,children:Object(f.jsx)("button",{className:"alert-button",type:"submit",children:"Alert"})})}))),L=n(14),A=(n(80),function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleInputChange=function(e){var t=e.target.checked,n=e.target.name,r=a.state.category;r[n]=t,a.setState({category:r})},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.publicBoolean,r=t.alertstory,s=t.category,c=n,i=[];for(var o in s)s[o]&&i.push(o);var l={alertId:a.state.alertId,publish:c,category:i,story:r};n&&N.archive(l),n||N.delete(a.state.alertId),a.props.deactivateAlert()},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(L.a)({},n,r))},a.handlePublic=function(e){"no"===e.target.value?a.setState({publicBoolean:!1}):a.setState({publicBoolean:!0})},a.state={alertpublic:"",alertcategory:"",alertstory:"",alertId:"",publicBoolean:!1,category:{gender:!1,sexualorientation:!1,race:!1,ideology:!1,religion:!1,others:!1}},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.setState({alertId:this.props.user.userAlert._id})}},{key:"render",value:function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{className:"alerth1",children:"Finished Alert"}),Object(f.jsxs)("form",{className:"iamokform iamokflex",onSubmit:this.handleFormSubmit,children:[Object(f.jsxs)("div",{className:"yesorno iamokflex",children:[Object(f.jsx)("label",{children:"Do you want this alert\u2019s information to go public anonymously?"}),Object(f.jsxs)("select",{name:"alertpublic",onChange:this.handlePublic,children:[Object(f.jsx)("option",{value:"no",children:"No"}),Object(f.jsx)("option",{value:"yes",children:"Yes"})]})]}),this.state.publicBoolean?Object(f.jsxs)("div",{className:"conditionalform",children:[Object(f.jsxs)("div",{className:"checkboxes",children:[Object(f.jsx)("h4",{children:"Please classify the type of discrimination"}),Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{name:"gender",type:"checkbox",checked:this.state.gender,onChange:this.handleInputChange}),"Gender"]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{name:"sexualorientation",type:"checkbox",checked:this.state.sexualorientation,onChange:this.handleInputChange}),"Sexual Orientation"]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{name:"race",type:"checkbox",checked:this.state.race,onChange:this.handleInputChange}),"Race"]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{name:"ideology",type:"checkbox",checked:this.state.ideology,onChange:this.handleInputChange}),"Ideology"]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{name:"religion",type:"checkbox",checked:this.state.religion,onChange:this.handleInputChange}),"Religion"]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{name:"others",type:"checkbox",checked:this.state.other,onChange:this.handleInputChange}),"Other"]})]}),Object(f.jsx)("h4",{children:"Would you like to share your story?"}),Object(f.jsx)("textarea",{name:"alertstory",className:"alertstory",value:this.state.alertstory,onChange:this.handleChange,placeholder:"Write your story here"})]}):null,Object(f.jsx)("button",{type:"submit",children:"Send Alert Info"})]})]})}}]),n}(a.Component)),I=Object(o.g)(y(A)),F=(n(81),y(function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleCancelBtn=Object(w.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.delete(a.props.user.userAlert._id);case 3:return e.next=5,a.props.me();case 5:console.log("i just did this.props.me"),a.props.deactivateAlert(),console.log("deactivated alert from AlertUser"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),a.handleFineBtn=Object(w.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.iamfine(a.props.user.userAlert._id);case 3:a.setState({iAmOk:!0}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),a.state={iAmOk:!1},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(w.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.setState({iAmOk:!1}),e.next=4,this.props.me();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(f.jsx)(f.Fragment,{children:this.props.user&&null!=this.props.user.userAlert?this.state.iAmOk?Object(f.jsx)(I,{deactivateAlert:this.props.deactivateAlert}):Object(f.jsxs)("div",{className:"user-alert",children:[Object(f.jsxs)("div",{className:"content",children:[Object(f.jsx)("span",{className:"dot"}),Object(f.jsx)("h4",{children:"Alert sent at:"}),Object(f.jsx)("h2",{children:this.props.user.userAlert.hour}),Object(f.jsx)("h2",{children:this.props.user.userAlert.date}),Object(f.jsx)("h4",{children:"To the following nets:"}),this.props.user.nets.map((function(e){return Object(f.jsx)("h2",{children:e.netname},e._id)}))]}),Object(f.jsxs)("div",{className:"buttons-div",children:[Object(f.jsxs)("button",{className:"cancel-alert",onClick:this.handleCancelBtn,children:[Object(f.jsx)("p",{className:"button-big",children:"Cancel"}),Object(f.jsx)("p",{className:"button-baseline",children:"not an alert"})]}),Object(f.jsxs)("button",{className:"finish-alert",onClick:this.handleFineBtn,children:[Object(f.jsx)("p",{className:"button-big",children:"I'm Ok"}),Object(f.jsx)("p",{className:"button-baseline",children:"finish alert"})]})]})]}):Object(f.jsx)("h4",{children:"Loading"})})}}]),n}(a.Component))),M=(n(82),n(83),y(function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.email,s=t.password;a.props.signup(n,r,s)},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(L.a)({},n,r))},a.state={username:"",email:"",password:""},a}return Object(h.a)(n,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.email,a=e.password;return Object(f.jsxs)("div",{className:"signupform",children:[Object(f.jsx)("h1",{children:"Welcome to Mutual"}),Object(f.jsxs)("form",{className:"formInputs",onSubmit:this.handleFormSubmit,autoComplete:"off",children:[Object(f.jsx)("input",{type:"text",name:"username",value:t,onChange:this.handleChange,placeholder:"Username"}),Object(f.jsx)("input",{type:"email",name:"email",value:n,onChange:this.handleChange,placeholder:"Email"}),Object(f.jsx)("input",{type:"password",name:"password",value:a,onChange:this.handleChange,placeholder:"Password"}),Object(f.jsx)("button",{type:"submit",children:" SignUp "})]})]})}}]),n}(a.Component))),B=y(function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.password;a.props.login(n,r)},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(L.a)({},n,r))},a.state={username:"",password:""},a}return Object(h.a)(n,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.password;return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Login to Mutual"}),Object(f.jsxs)("form",{className:"formInputs",onSubmit:this.handleFormSubmit,autoComplete:"nope",children:[Object(f.jsx)("input",{type:"text",name:"username",value:t,onChange:this.handleChange,placeholder:"Username"}),Object(f.jsx)("input",{type:"password",name:"password",value:n,onChange:this.handleChange,placeholder:"Password"}),Object(f.jsx)("button",{type:"submit",children:"Login"})]})]})}}]),n}(a.Component)),D=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleSignUpBtn=function(){a.setState({showSignupForm:!0,showLoginFrom:!1})},a.handleLogInBtn=function(){a.setState({showSignupForm:!1,showLoginFrom:!0})},a.state={showSignupForm:!1,showLoginFrom:!1,back:!1},a}return Object(h.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("div",{className:"authform",children:[!1===this.state.showSignupForm&&!1===this.state.showLoginFrom?Object(f.jsxs)("div",{className:"authbuttons",children:[Object(f.jsx)("h1",{children:"Your Mutual support"}),Object(f.jsx)("button",{onClick:this.handleSignUpBtn,children:"Sign Up"}),Object(f.jsx)("button",{onClick:this.handleLogInBtn,children:"Log In"})]}):null,this.state.showSignupForm?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(M,{}),Object(f.jsx)("button",{className:"alreadymember",onClick:this.handleLogInBtn,children:"Already a member? Log in"})]}):null,this.state.showLoginFrom?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(B,{}),Object(f.jsx)("button",{className:"alreadymember",onClick:this.handleSignUpBtn,children:"Not a member? Sign up"})]}):null]})}}]),n}(a.Component),J=y(function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={hasAlert:!1},e.deactivateAlert=function(){e.setState({hasAlert:!1})},e.activateAlert=function(){e.setState({hasAlert:!0})},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(w.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.props.me();case 3:this.props.user&&this.props.user.userAlert&&this.setState({hasAlert:!0}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(f.jsxs)("div",{children:[this.props.isLoggedIn?null:Object(f.jsx)(D,{data:this.getuserData}),this.props.isLoggedIn&&0===this.props.user.nets.length?Object(f.jsx)(o.a,{to:"/nets"}):null,this.props.isLoggedIn&&this.props.user.nets.length>0?this.state.hasAlert?Object(f.jsx)(F,{deactivateAlert:this.deactivateAlert}):Object(f.jsx)(S,{activateAlert:this.activateAlert}):null]})}}]),n}(r.a.Component)),R=(n(84),n(16)),U=n.n(R),Z=n(23);U.a.workerClass=Z.a,U.a.accessToken="pk.eyJ1IjoiZmVkZW11bmllbnRlIiwiYSI6ImNrbHh6ZnA2MjB1bzYydXJ6c3Zxd3JnaG0ifQ.MYXBWDkRnwRoUQn8Dz1RRg";var Y=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).loadAlertsFromDB=Object(w.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.heatmap();case 3:t=e.sent,a.setState({alerts:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),a.printAlerts=function(e){a.state.alerts.map((function(t){return new U.a.Marker({color:a.state.colorCode[t.category[0]],draggable:!1}).setLngLat(t.location).addTo(e)}))},a.state={viewLng:2.1945,viewLat:41.3988,viewZoom:14,alerts:[{active:!1,person:"604783be98faba5c88f6e3c3",location:[2.1908485,41.3988098,0],publish:!0,category:["others"],story:"example story",hour:"15:18:38",date:"09/03/2021"}],colorCode:{gender:"#bb00fd",race:"#0296f0",sexualorientation:"#fff400",ideology:"#06bd00",religion:"#e7005d",others:"#ff3131"}},a.mapContainer=r.a.createRef(),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(w.a)(C.a.mark((function e(){var t,n,a,r,s,c=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.loadAlertsFromDB();case 3:t=this.state,n=t.viewLng,a=t.viewLat,r=t.viewZoom,(s=new U.a.Map({container:this.mapContainer.current,style:"mapbox://styles/mapbox/bright-v8",center:[n,a],zoom:r})).on("move",(function(){c.setState({viewLng:s.getCenter().lng.toFixed(4),viewLat:s.getCenter().lat.toFixed(4),viewZoom:s.getZoom().toFixed(2)})})),this.printAlerts(s),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(f.jsx)("div",{children:Object(f.jsx)("div",{ref:this.mapContainer,className:"map-container"})})}}]),n}(a.Component),W=(n(103),new(function(){function e(){Object(u.a)(this,e),this.user=b.a.create({baseURL:"".concat("https://mutual.herokuapp.com","/api/users"),withCredentials:!0})}return Object(h.a)(e,[{key:"findUser",value:function(e){return this.user.get("/user/".concat(e)).then((function(e){return e.data}))}},{key:"findAllUsers",value:function(){return this.user.get("/all").then((function(e){return e.data})).catch((function(e){return e}))}}]),e}())),_=y(function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={alertArray:[]},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(w.a)(C.a.mark((function e(){var t,n,a,r,s,c=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.props.me();case 3:return t=this.props.user.netAlerts.map((function(e){return e.person})),e.next=6,W.findAllUsers();case 6:n=e.sent,a=n.filter((function(e){return!!t.includes(e._id)})),r=[],a.forEach((function(e,t){var n="";e.nets.forEach((function(e){c.props.user.nets.forEach((function(t){String(e)===String(t._id)&&(n+=t.netname+" ")}))})),r.push(n.trim())})),s=[],this.props.user.netAlerts.forEach((function(e,t){var n={};n.alertId=e._id,n.name=a[t].username,n.nets=r[t],n.date=e.date,n.hour=e.hour,s.push(n)})),this.setState({alertArray:s}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return 0===this.state.alertArray.length?Object(f.jsx)("h1",{children:"You have no alerts"}):Object(f.jsx)("div",{className:"alert-list-container",children:this.state.alertArray.map((function(e){return Object(f.jsxs)("div",{className:"alert-item",children:[Object(f.jsxs)("div",{className:"alert-item-text",children:[Object(f.jsx)("h3",{children:e.name}),Object(f.jsxs)("p",{className:"alert-text-nets",children:["From: ",e.nets]}),Object(f.jsxs)("p",{children:[e.hour," h, ",e.date]})]}),Object(f.jsx)("div",{className:"alert-list-btn",children:Object(f.jsx)(i.b,{to:"/alerts/map/".concat(e.alertId),children:Object(f.jsx)("button",{children:"Map"})})})]},e.alertId)}))})}}]),n}(a.Component)),z=(n(104),new(function(){function e(){Object(u.a)(this,e),this.net=b.a.create({baseURL:"".concat("https://mutual.herokuapp.com","/api/nets"),withCredentials:!0})}return Object(h.a)(e,[{key:"create",value:function(e,t){return this.net.post("/create",{netname:e,netcode:t}).then((function(e){return e.data}))}},{key:"join",value:function(e,t){return this.net.put("/join",{netname:e,netcode:t}).then((function(e){return e.data}))}},{key:"leave",value:function(e){return this.net.post("/leave",{value:e}).then((function(e){return e.data}))}}]),e}())),E=y(function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this)).handleLeave=function(){var e=Object(w.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.leave(t);case 3:return e.next=5,a.props.me();case 5:a.setState({nets:a.props.user.nets}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),a.state={nets:[]},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(w.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.props.me();case 3:this.setState({nets:this.props.user.nets}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return 0===this.props.user.nets.length?Object(f.jsxs)("div",{className:"empty-net-list",children:[Object(f.jsx)("h1",{children:"You are not in any net"}),Object(f.jsx)(i.b,{to:"/nets",children:Object(f.jsx)("button",{children:"Join or Create"})})]}):24===Object.keys(this.props.user.nets[0]).length?Object(f.jsx)("p",{children:"Loading..."}):Object(f.jsxs)("div",{className:"nets-list-container",children:[this.props.user.nets.map((function(t){return Object(f.jsxs)("div",{className:"net-card",children:[Object(f.jsxs)("div",{className:"net-card-info",children:[Object(f.jsx)("h4",{children:t.netname}),Object(f.jsx)("p",{children:"Access code:"}),Object(f.jsx)("p",{className:"netcode",children:t.netcode}),Object(f.jsxs)("p",{children:[t.members.length," members"]})]}),Object(f.jsx)("div",{className:"net-card-btn",children:Object(f.jsx)("button",{onClick:function(){return e.handleLeave(t._id)},children:"Leave"})})]},t._id)})),Object(f.jsx)(i.b,{to:"/nets",children:Object(f.jsx)("button",{className:"joinorcreatebtn",children:"Join or Create a Net"})})]})}}]),n}(a.Component)),P=(n(105),function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleFormSubmit=function(){var e=Object(w.a)(C.a.mark((function e(t){var n,r,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),n=a.state,r=n.netname,s=n.netcode,e.next=5,z.create(r,s);case 5:return e.next=7,a.props.me();case 7:a.setState({netname:"",netcode:""}),a.props.history.push("/profile"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(L.a)({},n,r))},a.state={netname:"",netcode:""},a}return Object(h.a)(n,[{key:"render",value:function(){var e=this.state,t=e.netname,n=e.netcode;return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Create a Net"}),Object(f.jsxs)("form",{className:"formInputs",onSubmit:this.handleFormSubmit,children:[Object(f.jsx)("input",{type:"text",name:"netname",value:t,onChange:this.handleChange,placeholder:"Net name"}),Object(f.jsx)("input",{type:"password",name:"netcode",value:n,onChange:this.handleChange,placeholder:"Net code"}),Object(f.jsx)("button",{type:"submit",children:"Create"})]})]})}}]),n}(a.Component)),T=Object(o.g)(y(P)),Q=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleFormSubmit=function(){var e=Object(w.a)(C.a.mark((function e(t){var n,r,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),n=a.state,r=n.netname,s=n.netcode,e.next=5,z.join(r,s);case 5:return a.setState({netname:"",netcode:""}),e.next=8,a.props.me();case 8:a.props.history.push("/profile"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(L.a)({},n,r))},a.state={netname:"",netcode:""},a}return Object(h.a)(n,[{key:"render",value:function(){var e=this.state,t=e.netname,n=e.netcode;return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Join a Net"}),Object(f.jsxs)("form",{className:"formInputs",onSubmit:this.handleFormSubmit,children:[Object(f.jsx)("input",{type:"text",name:"netname",value:t,onChange:this.handleChange,placeholder:"Net name"}),Object(f.jsx)("input",{type:"password",name:"netcode",value:n,onChange:this.handleChange,placeholder:"Net code"}),Object(f.jsx)("button",{type:"submit",children:"Join"})]})]})}}]),n}(a.Component),X=Object(o.g)(y(Q)),G=y(function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this)).handleCreateBtn=function(){a.setState({showCreateNet:!0,showJoinNet:!1})},a.handleJoinBtn=function(){a.setState({showCreateNet:!1,showJoinNet:!0})},a.state={showCreateNet:!1,showJoinNet:!1},a}return Object(h.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("div",{className:"authform",children:[this.props.user&&0===this.props.user.nets.length?Object(f.jsx)("h4",{children:"You are not part of any net yet"}):Object(f.jsx)("h4",{children:"Create or join a net"}),!1===this.state.showCreateNet&&!1===this.state.showJoinNet?Object(f.jsxs)("div",{className:"authbuttons",children:[Object(f.jsx)("button",{onClick:this.handleCreateBtn,children:"Create a net"}),Object(f.jsx)("button",{onClick:this.handleJoinBtn,children:"Join a net"})]}):null,this.state.showCreateNet?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(T,{}),Object(f.jsx)("button",{className:"alreadymember",onClick:this.handleJoinBtn,children:"Want to join a net?"})]}):null,this.state.showJoinNet?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(X,{}),Object(f.jsx)("button",{className:"alreadymember",onClick:this.handleCreateBtn,children:"Want to create a new net?"})]}):null]})}}]),n}(a.Component));n(106);U.a.workerClass=Z.a,U.a.accessToken="pk.eyJ1IjoiZmVkZW11bmllbnRlIiwiYSI6ImNrbHh6ZnA2MjB1bzYydXJ6c3Zxd3JnaG0ifQ.MYXBWDkRnwRoUQn8Dz1RRg";var H=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).loadAlertData=Object(w.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.active(a.props.match.params.alertId);case 3:t=e.sent,a.setState({alert:t,viewLng:t.location[0],viewLat:t.location[1]}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),a.printAlert=function(e){new U.a.Marker({color:"#ff033e",draggable:!1}).setLngLat(a.state.alert.location).addTo(e)},a.state={viewLat:41.3988,viewLng:2.1945,viewZoom:16,alert:null},a.mapContainer=r.a.createRef(),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(w.a)(C.a.mark((function e(){var t,n,a,r,s,c=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.loadAlertData();case 3:t=this.state,n=t.viewLng,a=t.viewLat,r=t.viewZoom,(s=new U.a.Map({container:this.mapContainer.current,style:"mapbox://styles/mapbox/streets-v11",center:[n,a],zoom:r})).on("move",(function(){c.setState({viewLng:s.getCenter().lng.toFixed(4),viewLat:s.getCenter().lat.toFixed(4),viewZoom:s.getZoom().toFixed(2)})})),this.printAlert(s),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{ref:this.mapContainer,className:"map-container",id:"single-alert-map"}),this.state.alert?Object(f.jsxs)("div",{className:"alert-user-info",children:[Object(f.jsx)(i.b,{to:"/alerts",children:"Back"}),Object(f.jsxs)("div",{className:"alert-bar-text",children:[Object(f.jsx)("p",{children:"Sent by:"}),Object(f.jsx)("p",{className:"alert-bar-username",children:this.state.alert.person.username}),Object(f.jsx)("p",{children:this.state.alert.hour}),Object(f.jsx)("p",{children:this.state.alert.date})]})]}):null]})}}]),n}(a.Component);n(107),n(108);var V=y((function(e){return Object(f.jsxs)("div",{className:"menu flex",children:[Object(f.jsxs)("div",{className:"flex",children:[Object(f.jsx)(i.b,{to:"/",children:Object(f.jsx)("button",{className:"menu-button",onClick:e.toggle,children:"Send an Alert"})}),Object(f.jsx)(i.b,{to:"/alerts",children:Object(f.jsx)("button",{className:"menu-button",onClick:e.toggle,children:"Alert List"})}),Object(f.jsx)(i.b,{to:"/profile",children:Object(f.jsx)("button",{className:"menu-button",onClick:e.toggle,children:"Net List"})}),Object(f.jsx)(i.b,{to:"/heatmap",children:Object(f.jsx)("button",{className:"menu-button",onClick:e.toggle,children:"Heat Map"})})]}),Object(f.jsx)("button",{className:"menu-button",onClick:function(){e.logout(),e.toggle()},children:"Logout"})]})})),q=y(function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).toggleMenu=function(){a.state.displayMenu?a.setState({displayMenu:!1}):a.setState({displayMenu:!0})},a.state={displayMenu:void 0},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.setState({displayMenu:!1})}},{key:"render",value:function(){return Object(f.jsx)("nav",{className:"navbar",children:this.props.isLoggedIn?Object(f.jsx)(f.Fragment,{children:this.state.displayMenu?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(V,{toggle:this.toggleMenu}),Object(f.jsx)("i",{className:"fas fa-times",onClick:this.toggleMenu}),Object(f.jsx)(i.b,{to:"/",onClick:this.toggleMenu,children:Object(f.jsx)("p",{className:"username",children:this.props.user&&this.props.user.username})}),Object(f.jsx)("span",{style:{width:"width: 4.3vh"}})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("i",{className:"fas fa-bars",onClick:this.toggleMenu}),Object(f.jsx)(i.b,{to:"/",children:Object(f.jsx)("p",{className:"username",children:this.props.user&&this.props.user.username})}),0===this.props.user.netAlerts.length?Object(f.jsx)("span",{className:"notif-num zero",children:Object(f.jsx)("p",{children:this.props.user&&this.props.user.netAlerts.length})}):Object(f.jsx)(i.b,{to:"/alerts",children:Object(f.jsx)("span",{className:"notif-num",children:Object(f.jsx)("p",{children:this.props.user&&this.props.user.netAlerts.length})})})]})}):null})}}]),n}(a.Component));var K=y((function(e){var t=e.isLoggedIn,n=e.isLoading,a=e.component,r=e.exact,s=e.path;return n?"Loading":Object(f.jsx)(o.b,{exact:r,path:s,render:function(e){return t?t?Object(f.jsx)(a,Object(l.a)({},e)):void 0:Object(f.jsx)(o.a,{to:"/"})}})}));var $=y((function(){return Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)(q,{}),Object(f.jsxs)(o.d,{children:[Object(f.jsx)(o.b,{exact:!0,path:"/",component:J}),Object(f.jsx)(K,{exact:!0,path:"/nets",component:G}),Object(f.jsx)(K,{exact:!0,path:"/heatmap",component:Y}),Object(f.jsx)(K,{exact:!0,path:"/alerts",component:_}),Object(f.jsx)(K,{exact:!0,path:"/profile",component:E}),Object(f.jsx)(K,{exact:!0,path:"/alerts/map/:alertId",component:H})]})]})}));c.a.render(Object(f.jsx)(i.a,{children:Object(f.jsx)(g,{children:Object(f.jsx)($,{})})}),document.getElementById("root"))},50:function(e,t,n){},71:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){}},[[109,1,2]]]);
//# sourceMappingURL=main.539ef899.chunk.js.map