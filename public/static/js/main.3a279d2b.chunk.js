(this["webpackJsonpm3-client"]=this["webpackJsonpm3-client"]||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(44),c=n.n(s),o=n(8),i=n(3),u=n(4),l=n(6),h=n(5),p=(n(50),n(9)),d=n(22),j=n(17),b=n.n(j),m=new(function(){function e(){Object(i.a)(this,e),this.auth=b.a.create({baseURL:"".concat("https://mutual.herokuapp.com"),withCredentials:!0})}return Object(u.a)(e,[{key:"signup",value:function(e,t,n){return this.auth.post("/auth/signup",{username:e,email:t,password:n}).then((function(e){return e.data}))}},{key:"login",value:function(e,t){return this.auth.post("/auth/login",{username:e,password:t}).then((function(e){return e.data}))}},{key:"logout",value:function(){return this.auth.get("/auth/logout").then((function(e){return e.data}))}},{key:"me",value:function(){return this.auth.get("/auth/me").then((function(e){return console.log(e),e.data}))}}]),e}()),f=n(0),O=r.a.createContext(),g=O.Consumer,v=O.Provider,x=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isLoggedIn:!1,isLoading:!0,user:null},e.me=function(){m.me().then((function(t){return e.setState({isLoggedIn:!0,user:t,isLoading:!1})})).catch((function(t){return e.setState({isLoggedIn:!1,user:null,isLoading:!1})}))},e.signup=function(t,n,a){m.signup(t,n,a).then((function(t){return e.setState({isLoggedIn:!0,user:t})})).catch((function(t){e.setState({isLoggedIn:!1,user:null})}))},e.login=function(t,n){m.login(t,n).then((function(t){return e.setState({isLoggedIn:!0,user:t})})).catch((function(t){e.setState({isLoggedIn:!1,user:null})}))},e.logout=function(){m.logout().then((function(){return e.setState({isLoggedIn:!1,user:null})})).catch((function(e){return console.log(e)}))},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.me()}},{key:"render",value:function(){var e=this.state,t=e.isLoggedIn,n=e.isLoading,a=e.user,r=this.signup,s=this.login,c=this.logout,o=this.me;return n?Object(f.jsx)("p",{children:"Loading"}):Object(f.jsx)(v,{value:{isLoggedIn:t,isLoading:n,user:a,signup:r,login:s,logout:c,me:o},children:this.props.children})}}]),n}(r.a.Component),y=function(e){return function(t){return Object(f.jsx)(g,{children:function(n){var a=n.isLoggedIn,r=n.isLoading,s=n.user,c=n.signup,o=n.login,i=n.logout,u=n.me;return Object(f.jsx)(e,Object(d.a)({isLoggedIn:a,isLoading:r,user:s,signup:c,login:o,logout:i,me:u},t))}})}},k=n(2),w=n.n(k),C=n(7),N=(n(71),new(function(){function e(){Object(i.a)(this,e),this.alert=b.a.create({baseURL:"".concat("https://mutual.herokuapp.com","/api/alerts"),withCredentials:!0})}return Object(u.a)(e,[{key:"create",value:function(e){return this.alert.post("/create",{locationArray:e}).then((function(e){return e.data}))}},{key:"active",value:function(e){return this.alert.get("/active/".concat(e)).then((function(e){return e.data}))}},{key:"delete",value:function(e){return this.alert.post("/delete",{value:e}).then((function(e){return e.data}))}},{key:"iamfine",value:function(e){return this.alert.post("/iamfine",{value:e}).then((function(e){return e.data}))}},{key:"archive",value:function(e){return this.alert.post("/archive",e).then((function(e){return e.data}))}},{key:"heatmap",value:function(){return this.alert.get("/heatmap").then((function(e){return e.data}))}}]),e}())),S=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this)).handleClick=Object(C.a)(w.a.mark((function e(){var t,n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[41.397680267661016,2.1901371017810924],e.next=3,N.create(t);case 3:return n=e.sent,e.next=6,a.props.me();case 6:r=n._id,a.setState({alertsent:!0,alertId:r});case 8:case"end":return e.stop()}}),e)}))),a.state={alertsent:!1,alertId:"",alert:{}},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.setState({alertsent:!1})}},{key:"render",value:function(){return this.state.alertsent?Object(f.jsx)(p.a,{to:"/alerts/".concat(this.state.alertId)}):Object(f.jsx)("div",{className:"alert-container",onClick:this.handleClick,children:Object(f.jsx)("button",{className:"alert-button",type:"submit",children:"Alert"})})}}]),n}(a.Component),L=Object(p.g)(y(S)),I=(n(80),n(14)),A=(n(81),y(function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={username:"",email:"",password:""},e.handleFormSubmit=function(t){t.preventDefault();var n=e.state,a=n.username,r=n.email,s=n.password;e.props.signup(a,r,s)},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(I.a)({},a,r))},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.email,a=e.password;return Object(f.jsxs)("div",{className:"signupform",children:[Object(f.jsx)("h1",{children:"Welcome to Mutual"}),Object(f.jsxs)("form",{className:"formInputs",onSubmit:this.handleFormSubmit,children:[Object(f.jsx)("input",{type:"text",name:"username",value:t,onChange:this.handleChange,placeholder:"Username"}),Object(f.jsx)("input",{type:"email",name:"email",value:n,onChange:this.handleChange,placeholder:"Email"}),Object(f.jsx)("input",{type:"password",name:"password",value:a,onChange:this.handleChange,placeholder:"Password"}),Object(f.jsx)("button",{type:"submit",children:" SignUp "})]})]})}}]),n}(a.Component))),F=y(function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:""},e.handleFormSubmit=function(t){t.preventDefault();var n=e.state,a=n.username,r=n.password;e.props.login(a,r)},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(I.a)({},a,r))},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.password;return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Login to Mutual"}),Object(f.jsxs)("form",{className:"formInputs",onSubmit:this.handleFormSubmit,children:[Object(f.jsx)("input",{type:"text",name:"username",value:t,onChange:this.handleChange,placeholder:"Username"}),Object(f.jsx)("input",{type:"password",name:"password",value:n,onChange:this.handleChange,placeholder:"Password"}),Object(f.jsx)("button",{type:"submit",children:"Login"})]})]})}}]),n}(a.Component)),M=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={showSignupForm:!1,showLoginFrom:!1,back:!1},e.handleSignUpBtn=function(){e.setState({showSignupForm:!0,showLoginFrom:!1})},e.handleLogInBtn=function(){e.setState({showSignupForm:!1,showLoginFrom:!0})},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("div",{className:"authform",children:[!1===this.state.showSignupForm&&!1===this.state.showLoginFrom?Object(f.jsxs)("div",{className:"authbuttons",children:[Object(f.jsx)("h1",{children:"Your Mutual support"}),Object(f.jsx)("button",{onClick:this.handleSignUpBtn,children:"Sign Up"}),Object(f.jsx)("button",{onClick:this.handleLogInBtn,children:"Log In"})]}):null,this.state.showSignupForm?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(A,{}),Object(f.jsx)("button",{className:"alreadymember",onClick:this.handleLogInBtn,children:"Already a member? Log in"})]}):null,this.state.showLoginFrom?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(F,{}),Object(f.jsx)("button",{className:"alreadymember",onClick:this.handleSignUpBtn,children:"Not a member? Sign up"})]}):null]})}}]),n}(a.Component),D=(n(82),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={alertpublic:"",alertcategory:"",alertstory:"",alertId:"",publicBoolean:!1,category:{gender:!1,sexualorientation:!1,race:!1,ideology:!1,religion:!1,others:!1}},e.handleInputChange=function(t){var n=t.target.checked,a=t.target.name,r=e.state.category;r[a]=n,e.setState({category:r})},e.handleFormSubmit=function(){var t=Object(C.a)(w.a.mark((function t(n){var a,r,s,c,o,i,u,l;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(u in n.preventDefault(),a=e.state,r=a.publicBoolean,s=a.alertstory,c=a.category,o=r,i=[],c)c[u]&&i.push(u);l={alertId:e.state.alertId,publish:o,category:i,story:s},r&&N.archive(l),console.log("this should archive the alert"),r||N.delete(e.state.alertId),console.log("this should delete the alert "),e.props.me(),console.log("this should update the user data"),e.props.history.push("/heatmap");case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(I.a)({},a,r))},e.handlePublic=function(t){"no"===t.target.value?e.setState({publicBoolean:!1}):e.setState({publicBoolean:!0})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.setState({alertId:this.props.alertData._id,redirect:!1})}},{key:"componentWillUnmount",value:function(){var e=Object(C.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.me();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{className:"alerth1",children:"Finished Alert"}),Object(f.jsxs)("form",{className:"iamokform iamokflex",onSubmit:this.handleFormSubmit,children:[Object(f.jsxs)("div",{className:"yesorno iamokflex",children:[Object(f.jsx)("label",{children:"Do you want this alert\u2019s information to go public anonymously?"}),Object(f.jsxs)("select",{name:"alertpublic",onChange:this.handlePublic,children:[Object(f.jsx)("option",{value:"no",children:"No"}),Object(f.jsx)("option",{value:"yes",children:"Yes"})]})]}),this.state.publicBoolean?Object(f.jsxs)("div",{className:"conditionalform",children:[Object(f.jsxs)("div",{className:"checkboxes",children:[Object(f.jsx)("h4",{children:"Please classify the type of discrimination"}),Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{name:"gender",type:"checkbox",checked:this.state.gender,onChange:this.handleInputChange}),"Gender"]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{name:"sexualorientation",type:"checkbox",checked:this.state.sexualorientation,onChange:this.handleInputChange}),"Sexual Orientation"]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{name:"race",type:"checkbox",checked:this.state.race,onChange:this.handleInputChange}),"Race"]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{name:"ideology",type:"checkbox",checked:this.state.ideology,onChange:this.handleInputChange}),"Ideology"]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{name:"religion",type:"checkbox",checked:this.state.religion,onChange:this.handleInputChange}),"Religion"]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{name:"others",type:"checkbox",checked:this.state.other,onChange:this.handleInputChange}),"Other"]})]}),Object(f.jsx)("h4",{children:"Would you like to share your story?"}),Object(f.jsx)("textarea",{name:"alertstory",className:"alertstory",value:this.state.alertstory,onChange:this.handleChange,placeholder:"Write your story here"})]}):null,Object(f.jsx)("button",{type:"submit",children:"Send Alert Info"})]})]})}}]),n}(a.Component)),B=Object(p.g)(y(D)),J=(n(83),y(function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).getActiveAlert=Object(C.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.active(a.props.match.params.alertId);case 2:t=e.sent,a.setState({alert:t,iAmOk:!1});case 4:case"end":return e.stop()}}),e)}))),a.handleCancelBtn=Object(C.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.delete(a.state.alert._id);case 2:case"end":return e.stop()}}),e)}))),a.handleFineBtn=Object(C.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.iamfine(a.state.alert._id);case 2:a.setState({iAmOk:!0});case 3:case"end":return e.stop()}}),e)}))),a.state={alert:{},iAmOk:!1,sent:null},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getActiveAlert(),this.setState({redirectHome:null})}},{key:"componentWillUnmount",value:function(){var e=Object(C.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.me();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=Object(f.jsxs)("div",{className:"user-alert",children:[Object(f.jsxs)("div",{className:"content",children:[Object(f.jsx)("span",{class:"dot"}),Object(f.jsx)("h4",{children:"Alert sent at:"}),Object(f.jsx)("h2",{children:this.state.alert.hour}),Object(f.jsx)("h2",{children:this.state.alert.date}),Object(f.jsx)("h4",{children:"To the following nets:"}),this.props.user.nets.map((function(e){return Object(f.jsx)("h2",{children:e.netname},e._id)}))]}),Object(f.jsxs)("div",{className:"buttons-div",children:[Object(f.jsx)(o.b,{to:"/",children:Object(f.jsxs)("button",{className:"cancel-alert",onClick:this.handleCancelBtn,children:[Object(f.jsx)("p",{className:"button-big",children:"Cancel"}),Object(f.jsx)("p",{className:"button-baseline",children:"not an alert"})]})}),Object(f.jsxs)("button",{className:"finish-alert",onClick:this.handleFineBtn,children:[Object(f.jsx)("p",{className:"button-big",children:"I'm Ok"}),Object(f.jsx)("p",{className:"button-baseline",children:"finish alert"})]})]})]});return Object(f.jsx)(f.Fragment,{children:this.state.iAmOk?Object(f.jsx)(B,{alertData:this.state.alert}):e})}}]),n}(a.Component))),U=y(function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).getuserData=Object(C.a)(w.a.mark((function t(){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.me();case 2:case"end":return t.stop()}}),t)}))),e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(C.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getuserData();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(f.jsxs)("div",{children:[this.props.isLoggedIn?null:Object(f.jsx)(M,{data:this.getuserData}),this.props.isLoggedIn&&0===this.props.user.nets.length?Object(f.jsx)(p.a,{to:"/nets"}):null,this.props.isLoggedIn&&this.props.user.nets.length>0?Object(f.jsx)(L,{}):null]})}}]),n}(r.a.Component)),R=(n(84),n(16)),Z=n.n(R),W=n(23);Z.a.workerClass=W.a,Z.a.accessToken="pk.eyJ1IjoiZmVkZW11bmllbnRlIiwiYSI6ImNrbHh6ZnA2MjB1bzYydXJ6c3Zxd3JnaG0ifQ.MYXBWDkRnwRoUQn8Dz1RRg";var Y=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).loadAlertsFromDB=Object(C.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.heatmap();case 2:t=e.sent,a.setState({alerts:t});case 4:case"end":return e.stop()}}),e)}))),a.printAlerts=function(e){a.state.alerts.map((function(t){return new Z.a.Marker({color:a.state.colorCode[t.category[0]],draggable:!1}).setLngLat(t.location).addTo(e)}))},a.state={viewLng:2.1945,viewLat:41.3988,viewZoom:14,alerts:[{active:!1,person:"604783be98faba5c88f6e3c3",location:[2.1908485,41.3988098,0],publish:!0,category:["others"],story:"example story",hour:"15:18:38",date:"09/03/2021"}],colorCode:{gender:"#bb00fd",race:"#0296f0",sexualorientation:"#fff400",ideology:"#06bd00",religion:"#e7005d",others:"#ff3131"}},a.mapContainer=r.a.createRef(),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(C.a)(w.a.mark((function e(){var t,n,a,r,s,c=this;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadAlertsFromDB();case 2:t=this.state,n=t.viewLng,a=t.viewLat,r=t.viewZoom,(s=new Z.a.Map({container:this.mapContainer.current,style:"mapbox://styles/mapbox/bright-v8",center:[n,a],zoom:r})).on("move",(function(){c.setState({viewLng:s.getCenter().lng.toFixed(4),viewLat:s.getCenter().lat.toFixed(4),viewZoom:s.getZoom().toFixed(2)})})),this.printAlerts(s);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(C.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadAlertsFromDB();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state;e.lng,e.lat,e.zoom;return Object(f.jsx)("div",{children:Object(f.jsx)("div",{ref:this.mapContainer,className:"map-container"})})}}]),n}(a.Component),z=new(function(){function e(){Object(i.a)(this,e),this.user=b.a.create({baseURL:"".concat("https://mutual.herokuapp.com","/api/users"),withCredentials:!0})}return Object(u.a)(e,[{key:"alertSender",value:function(e){return this.user.get("/alert-sender",{senderId:e}).then((function(e){return e.data}))}}]),e}()),_=y(function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={senderArr:[]},e.getCommonNets=function(t){return e.props.user.nets.map((function(e){return t.nets.includes(e),e.netname}))},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(C.a)(w.a.mark((function e(){var t,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.me();case 2:t=this.props.user.netAlerts.map((function(e){return e.person})),console.log("this should be the id of people",t),n=t.map(function(){var e=Object(C.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.alertSender(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),console.dir("this should be an array of populated people",n),this.setState({senderArr:n});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return 0===!this.state.senderArr.length?Object(f.jsx)("p",{children:"Loading..."}):Object(f.jsx)("div",{children:Object(f.jsx)("h1",{children:"Alert List here"})})}}]),n}(a.Component)),P=new(function(){function e(){Object(i.a)(this,e),this.net=b.a.create({baseURL:"".concat("https://mutual.herokuapp.com","/api/nets"),withCredentials:!0})}return Object(u.a)(e,[{key:"create",value:function(e,t){return this.net.post("/create",{netname:e,netcode:t}).then((function(e){return e.data}))}},{key:"join",value:function(e,t){return this.net.put("/join",{netname:e,netcode:t}).then((function(e){return e.data}))}},{key:"leave",value:function(e){return this.net.post("/leave",{value:e}).then((function(e){return e.data}))}}]),e}()),T=y(function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this)).handleLeave=function(){var e=Object(C.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.leave(t);case 2:return e.next=4,a.props.me();case 4:a.setState({nets:a.props.user.nets});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={nets:[]},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(C.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.me();case 2:this.setState({nets:this.props.user.nets});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return console.log("this.props in profile",this.props),0===this.props.user.nets.length?Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"You are not in any net"}),Object(f.jsx)(o.b,{to:"/nets",children:Object(f.jsx)("button",{children:"Join or Create"})})]}):24===Object.keys(this.props.user.nets[0]).length?Object(f.jsx)("p",{children:"Loading..."}):Object(f.jsxs)("div",{children:[this.props.user.nets.map((function(t){return Object(f.jsxs)("div",{className:"net-card",children:[Object(f.jsx)("h4",{children:t.netname}),Object(f.jsxs)("p",{children:["Access code: ",t.netcode]}),Object(f.jsxs)("p",{children:[t.members.length," members"]}),Object(f.jsx)("button",{onClick:function(){return e.handleLeave(t._id)},children:"Leave"})]},t._id)})),Object(f.jsx)(o.b,{to:"/nets",children:Object(f.jsx)("button",{children:"Join or Create a Net"})})]})}}]),n}(a.Component)),H=(n(103),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).updateUserData=function(){console.log("I am calling this.props.me to update User Data!!!"),a.props.me()},a.handleFormSubmit=function(){var e=Object(C.a)(w.a.mark((function e(t){var n,r,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state,r=n.netname,s=n.netcode,e.next=4,P.create(r,s);case 4:a.updateUserData(),console.log("this.props in create net just before redirecting",a.props),a.setState({netname:"",netcode:""}),a.props.history.push("/profile");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(I.a)({},n,r))},a.state={netname:"",netcode:""},a}return Object(u.a)(n,[{key:"render",value:function(){console.log("this.props in create net",this.props);var e=this.state,t=e.netname,n=e.netcode;return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Create a Net"}),Object(f.jsxs)("form",{className:"formInputs",onSubmit:this.handleFormSubmit,children:[Object(f.jsx)("input",{type:"text",name:"netname",value:t,onChange:this.handleChange,placeholder:"Net name"}),Object(f.jsx)("input",{type:"password",name:"netcode",value:n,onChange:this.handleChange,placeholder:"Net code"}),Object(f.jsx)("button",{type:"submit",children:"Create"})]})]})}}]),n}(a.Component)),Q=Object(p.g)(y(H)),X=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleFormSubmit=function(){var e=Object(C.a)(w.a.mark((function e(t){var n,r,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state,r=n.netname,s=n.netcode,e.next=4,P.join(r,s);case 4:return a.setState({netname:"",netcode:""}),console.log("props after setState before push",a.props),e.next=8,a.props.me();case 8:a.props.history.push("/profile");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(I.a)({},n,r))},a.state={netname:"",netcode:""},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.netname,n=e.netcode;return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Join a Net"}),Object(f.jsxs)("form",{className:"formInputs",onSubmit:this.handleFormSubmit,children:[Object(f.jsx)("input",{type:"text",name:"netname",value:t,onChange:this.handleChange,placeholder:"Net name"}),Object(f.jsx)("input",{type:"password",name:"netcode",value:n,onChange:this.handleChange,placeholder:"Net code"}),Object(f.jsx)("button",{type:"submit",children:"Join"})]})]})}}]),n}(a.Component),G=Object(p.g)(y(X)),E=y(function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this)).goBack=function(){var e=Object(C.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.me();case 2:n=e.sent,console.log("updatedUser",n),a.setState({redirect:t});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleCreateBtn=function(){a.setState({showCreateNet:!0,showJoinNet:!1})},a.handleJoinBtn=function(){a.setState({showCreateNet:!1,showJoinNet:!0})},a.state={showCreateNet:!1,showJoinNet:!1,redirect:null},a}return Object(u.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("div",{className:"authform",children:[Object(f.jsx)("h4",{children:"You are not part of any net yet"}),!1===this.state.showCreateNet&&!1===this.state.showJoinNet?Object(f.jsxs)("div",{className:"authbuttons",children:[Object(f.jsx)("button",{onClick:this.handleCreateBtn,children:"Create a net"}),Object(f.jsx)("button",{onClick:this.handleJoinBtn,children:"Join a net"})]}):null,this.state.showCreateNet?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(Q,{back:this.goBack}),Object(f.jsx)("button",{className:"alreadymember",onClick:this.handleJoinBtn,children:"Want to join a net?"})]}):null,this.state.showJoinNet?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(G,{}),Object(f.jsx)("button",{className:"alreadymember",onClick:this.handleCreateBtn,children:"Want to create a new net?"})]}):null]})}}]),n}(a.Component));n(104);Z.a.workerClass=W.a,Z.a.accessToken="pk.eyJ1IjoiZmVkZW11bmllbnRlIiwiYSI6ImNrbHh6ZnA2MjB1bzYydXJ6c3Zxd3JnaG0ifQ.MYXBWDkRnwRoUQn8Dz1RRg";var V=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).loadAlertData=Object(C.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.active(a.props.match.params.alertId);case 2:t=e.sent,a.setState({alert:t,viewLng:t.location[0],viewLat:t.location[1]});case 4:case"end":return e.stop()}}),e)}))),a.printAlert=function(e){new Z.a.Marker({color:"#ff033e",draggable:!1}).setLngLat(a.state.alert.location).addTo(e)},a.state={viewLng:2.1945,viewLat:41.3988,viewZoom:16,alert:[]},a.mapContainer=r.a.createRef(),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(C.a)(w.a.mark((function e(){var t,n,a,r,s,c=this;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadAlertData();case 2:t=this.state,n=t.viewLng,a=t.viewLat,r=t.viewZoom,(s=new Z.a.Map({container:this.mapContainer.current,style:"mapbox://styles/mapbox/streets-v11",center:[n,a],zoom:r})).on("move",(function(){c.setState({viewLng:s.getCenter().lng.toFixed(4),viewLat:s.getCenter().lat.toFixed(4),viewZoom:s.getZoom().toFixed(2)})})),this.printAlert(s);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)(o.b,{to:"/alerts",children:Object(f.jsx)("nav",{className:"backNav",children:"Back"})}),Object(f.jsx)("div",{ref:this.mapContainer,className:"map-container"})]})}}]),n}(a.Component);n(105),n(106);var q=y((function(e){return Object(f.jsxs)("div",{className:"menu flex",children:[Object(f.jsxs)("div",{className:"flex",children:[Object(f.jsx)(o.b,{to:"/",children:Object(f.jsx)("button",{className:"menu-button",onClick:e.toggle,children:"Send an Alert"})}),Object(f.jsx)(o.b,{to:"/alerts",children:Object(f.jsx)("button",{className:"menu-button",onClick:e.toggle,children:"Alert List"})}),Object(f.jsx)(o.b,{to:"/profile",children:Object(f.jsx)("button",{className:"menu-button",onClick:e.toggle,children:"Manage Nets"})}),Object(f.jsx)(o.b,{to:"/heatmap",children:Object(f.jsx)("button",{className:"menu-button",onClick:e.toggle,children:"Heat Map"})})]}),Object(f.jsx)("button",{className:"menu-button",onClick:function(){e.logout(),e.toggle()},children:"Logout"})]})})),K=y(function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={displayMenu:void 0},e.toggleMenu=function(){e.state.displayMenu?e.setState({displayMenu:!1}):e.setState({displayMenu:!0})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.setState({displayMenu:!1})}},{key:"render",value:function(){return Object(f.jsx)("nav",{className:"navbar",children:this.props.isLoggedIn?Object(f.jsx)(f.Fragment,{children:this.state.displayMenu?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(q,{toggle:this.toggleMenu}),Object(f.jsx)("i",{className:"fas fa-times",onClick:this.toggleMenu}),Object(f.jsx)(o.b,{to:"/",onClick:this.toggleMenu,children:Object(f.jsx)("p",{className:"username",children:this.props.user&&this.props.user.username})}),Object(f.jsx)("span",{style:{width:"width: 4.4vh"}})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("i",{className:"fas fa-bars",onClick:this.toggleMenu}),Object(f.jsx)(o.b,{to:"/",children:Object(f.jsx)("p",{className:"username",children:this.props.user&&this.props.user.username})}),0===this.props.user.netAlerts.length?Object(f.jsx)("span",{className:"notif-num zero",children:Object(f.jsx)("p",{children:this.props.user&&this.props.user.netAlerts.length})}):Object(f.jsx)(o.b,{to:"/alerts",children:Object(f.jsx)("span",{className:"notif-num",children:Object(f.jsx)("p",{children:this.props.user&&this.props.user.netAlerts.length})})})]})}):null})}}]),n}(a.Component));var $=y((function(e){var t=e.isLoggedIn,n=e.isLoading,a=e.component,r=e.exact,s=e.path;return n?"Loading":Object(f.jsx)(p.b,{exact:r,path:s,render:function(e){return t?t?Object(f.jsx)(a,Object(d.a)({},e)):void 0:Object(f.jsx)(p.a,{to:"/"})}})})),ee=y(function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={user:{}},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)(K,{}),Object(f.jsxs)(p.d,{children:[Object(f.jsx)(p.b,{exact:!0,path:"/",component:U}),Object(f.jsx)($,{exact:!0,path:"/nets",component:E}),Object(f.jsx)($,{exact:!0,path:"/heatmap",component:Y}),Object(f.jsx)($,{exact:!0,path:"/alerts",component:_}),Object(f.jsx)($,{exact:!0,path:"/profile",component:T}),Object(f.jsx)($,{exact:!0,path:"/alerts/:alertId",component:J}),Object(f.jsx)($,{exact:!0,path:"/alerts/map/:alertId",component:V})]})]})}}]),n}(a.Component));c.a.render(Object(f.jsx)(o.a,{children:Object(f.jsx)(x,{children:Object(f.jsx)(ee,{})})}),document.getElementById("root"))},50:function(e,t,n){},71:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){}},[[107,1,2]]]);
//# sourceMappingURL=main.3a279d2b.chunk.js.map